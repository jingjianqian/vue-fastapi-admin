# Vue-FastAPI-Admin æµ‹è¯•æ–¹æ¡ˆ

## ä¸€ã€æµ‹è¯•æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯
æœ¬é¡¹ç›®æ˜¯åŸºäº FastAPI + Vue3 çš„å‰åç«¯åˆ†ç¦»ç®¡ç†å¹³å°ï¼Œå…·å¤‡ RBAC æƒé™ç®¡ç†ã€åŠ¨æ€è·¯ç”±å’Œ JWT é‰´æƒåŠŸèƒ½ã€‚

### 1.2 æµ‹è¯•ç›®æ ‡
- è¦†ç›–æ‰€æœ‰åç«¯ API æ¥å£ï¼ˆç›®æ ‡è¦†ç›–ç‡ 80%+ï¼‰
- å®ç°å‰åç«¯é›†æˆæµ‹è¯•
- å»ºç«‹ AI æ™ºèƒ½åŒ–æµ‹è¯•æ¡†æ¶ï¼Œæ”¯æŒè‡ªåŠ¨åŒ–ç”¨ä¾‹ç”Ÿæˆå’Œæ‰§è¡Œ
- åŸºäº API åˆ—è¡¨è‡ªåŠ¨ç”Ÿæˆå’Œæ›´æ–°æµ‹è¯•ç”¨ä¾‹

### 1.3 æµ‹è¯•ç¯å¢ƒ
- **åç«¯**: Python 3.11 + FastAPI + Tortoise ORM
- **å‰ç«¯**: Vue3 + Vite + Naive UI
- **æ•°æ®åº“**: SQLite/PostgreSQL/MySQL
- **æµ‹è¯•æ¡†æ¶**: 
  - åç«¯: pytest + httpx + pytest-asyncio
  - å‰ç«¯: Vitest + Vue Test Utils
  - E2E: Playwright
  - AIæµ‹è¯•: LangChain + OpenAI API

---

## äºŒã€æµ‹è¯•æ¶æ„è®¾è®¡

### 2.1 æµ‹è¯•å±‚çº§

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     E2E ç«¯åˆ°ç«¯æµ‹è¯• (Playwright)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     é›†æˆæµ‹è¯• (API + Database)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     å•å…ƒæµ‹è¯• (Controllers/Utils)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     AIæ™ºèƒ½æµ‹è¯•ç”Ÿæˆå™¨                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ç›®å½•ç»“æ„

```
tests/
â”œâ”€â”€ unit/                    # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ test_controllers/
â”‚   â”œâ”€â”€ test_utils/
â”‚   â””â”€â”€ test_models/
â”œâ”€â”€ integration/             # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ test_api_v1/
â”‚   â”‚   â”œâ”€â”€ test_users.py
â”‚   â”‚   â”œâ”€â”€ test_roles.py
â”‚   â”‚   â”œâ”€â”€ test_menus.py
â”‚   â”‚   â”œâ”€â”€ test_apis.py
â”‚   â”‚   â”œâ”€â”€ test_depts.py
â”‚   â”‚   â”œâ”€â”€ test_base.py
â”‚   â”‚   â”œâ”€â”€ test_auditlog.py
â”‚   â”‚   â”œâ”€â”€ test_wechat.py
â”‚   â”‚   â”œâ”€â”€ test_wxapp.py
â”‚   â”‚   â””â”€â”€ test_crawler.py
â”‚   â””â”€â”€ conftest.py
â”œâ”€â”€ e2e/                     # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ test_login_flow.py
â”‚   â”œâ”€â”€ test_user_management.py
â”‚   â””â”€â”€ test_permission_flow.py
â”œâ”€â”€ ai_testing/              # AI æ™ºèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_generator.py   # æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ api_analyzer.py      # API åˆ†æå™¨
â”‚   â”œâ”€â”€ test_executor.py     # æµ‹è¯•æ‰§è¡Œå™¨
â”‚   â””â”€â”€ report_generator.py  # æŠ¥å‘Šç”Ÿæˆå™¨
â”œâ”€â”€ fixtures/                # æµ‹è¯•æ•°æ®
â”‚   â”œâ”€â”€ users.json
â”‚   â”œâ”€â”€ roles.json
â”‚   â””â”€â”€ menus.json
â”œâ”€â”€ conftest.py              # å…¨å±€é…ç½®
â”œâ”€â”€ pytest.ini               # pytest é…ç½®
â””â”€â”€ requirements-test.txt    # æµ‹è¯•ä¾èµ–
```

---

## ä¸‰ã€åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹æ¸…å•

### 3.1 è®¤è¯ä¸æˆæƒæ¨¡å— (Base)

#### 3.1.1 ç™»å½•è®¤è¯
| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| AUTH-001 | æ­£å¸¸ç™»å½• | POST /api/v1/base/access_token | ä½¿ç”¨æ­£ç¡®çš„ç”¨æˆ·åå¯†ç ç™»å½• | P0 |
| AUTH-002 | é”™è¯¯å¯†ç  | POST /api/v1/base/access_token | ä½¿ç”¨é”™è¯¯å¯†ç ç™»å½• | P0 |
| AUTH-003 | ä¸å­˜åœ¨ç”¨æˆ· | POST /api/v1/base/access_token | ä½¿ç”¨ä¸å­˜åœ¨çš„ç”¨æˆ·å | P0 |
| AUTH-004 | ç©ºç”¨æˆ·å | POST /api/v1/base/access_token | ç”¨æˆ·åä¸ºç©º | P1 |
| AUTH-005 | ç©ºå¯†ç  | POST /api/v1/base/access_token | å¯†ç ä¸ºç©º | P1 |
| AUTH-006 | SQLæ³¨å…¥é˜²æŠ¤ | POST /api/v1/base/access_token | è¾“å…¥SQLæ³¨å…¥è¯­å¥ | P0 |

#### 3.1.2 ç”¨æˆ·ä¿¡æ¯
| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| USER-INFO-001 | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ | GET /api/v1/base/userinfo | æœ‰æ•ˆTokenè·å–ç”¨æˆ·ä¿¡æ¯ | P0 |
| USER-INFO-002 | æ— Tokenè®¿é—® | GET /api/v1/base/userinfo | ä¸å¸¦Tokenè®¿é—® | P0 |
| USER-INFO-003 | è¿‡æœŸToken | GET /api/v1/base/userinfo | ä½¿ç”¨è¿‡æœŸToken | P0 |
| USER-INFO-004 | éæ³•Token | GET /api/v1/base/userinfo | ä½¿ç”¨ä¼ªé€ Token | P0 |

#### 3.1.3 ç”¨æˆ·èœå•
| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| MENU-001 | è¶…çº§ç®¡ç†å‘˜èœå• | GET /api/v1/base/usermenu | è¶…çº§ç®¡ç†å‘˜è·å–æ‰€æœ‰èœå• | P0 |
| MENU-002 | æ™®é€šç”¨æˆ·èœå• | GET /api/v1/base/usermenu | æ™®é€šç”¨æˆ·è·å–æˆæƒèœå• | P0 |
| MENU-003 | æ— æƒé™ç”¨æˆ·èœå• | GET /api/v1/base/usermenu | æ— ä»»ä½•è§’è‰²ç”¨æˆ· | P1 |

#### 3.1.4 ç”¨æˆ·APIæƒé™
| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| API-PERM-001 | è¶…çº§ç®¡ç†å‘˜API | GET /api/v1/base/userapi | è¶…çº§ç®¡ç†å‘˜è·å–æ‰€æœ‰API | P0 |
| API-PERM-002 | æ™®é€šç”¨æˆ·API | GET /api/v1/base/userapi | æ™®é€šç”¨æˆ·è·å–æˆæƒAPI | P0 |

#### 3.1.5 ä¿®æ”¹å¯†ç 
| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| PWD-001 | æ­£å¸¸ä¿®æ”¹å¯†ç  | POST /api/v1/base/update_password | æ—§å¯†ç æ­£ç¡®ï¼Œä¿®æ”¹å¯†ç  | P0 |
| PWD-002 | æ—§å¯†ç é”™è¯¯ | POST /api/v1/base/update_password | æ—§å¯†ç è¾“å…¥é”™è¯¯ | P0 |
| PWD-003 | å¼±å¯†ç éªŒè¯ | POST /api/v1/base/update_password | æ–°å¯†ç è¿‡äºç®€å• | P1 |

---

### 3.2 ç”¨æˆ·ç®¡ç†æ¨¡å— (Users)

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| USER-001 | ç”¨æˆ·åˆ—è¡¨åˆ†é¡µ | GET /api/v1/user/list | æ­£å¸¸åˆ†é¡µæŸ¥è¯¢ | P0 |
| USER-002 | ç”¨æˆ·æœç´¢-ç”¨æˆ·å | GET /api/v1/user/list | æŒ‰ç”¨æˆ·åæœç´¢ | P0 |
| USER-003 | ç”¨æˆ·æœç´¢-é‚®ç®± | GET /api/v1/user/list | æŒ‰é‚®ç®±æœç´¢ | P1 |
| USER-004 | ç”¨æˆ·æœç´¢-éƒ¨é—¨ | GET /api/v1/user/list | æŒ‰éƒ¨é—¨IDç­›é€‰ | P1 |
| USER-005 | æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ… | GET /api/v1/user/get | æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ· | P0 |
| USER-006 | æŸ¥çœ‹ä¸å­˜åœ¨ç”¨æˆ· | GET /api/v1/user/get | æŸ¥è¯¢ä¸å­˜åœ¨çš„ç”¨æˆ·ID | P1 |
| USER-007 | åˆ›å»ºç”¨æˆ·-æ­£å¸¸ | POST /api/v1/user/create | å®Œæ•´ä¿¡æ¯åˆ›å»ºç”¨æˆ· | P0 |
| USER-008 | åˆ›å»ºç”¨æˆ·-é‚®ç®±é‡å¤ | POST /api/v1/user/create | ä½¿ç”¨å·²å­˜åœ¨é‚®ç®± | P0 |
| USER-009 | åˆ›å»ºç”¨æˆ·-å¿…å¡«é¡¹ç¼ºå¤± | POST /api/v1/user/create | ç¼ºå°‘å¿…å¡«å­—æ®µ | P1 |
| USER-010 | åˆ›å»ºç”¨æˆ·-é‚®ç®±æ ¼å¼é”™è¯¯ | POST /api/v1/user/create | é‚®ç®±æ ¼å¼ä¸æ­£ç¡® | P1 |
| USER-011 | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | POST /api/v1/user/update | ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ | P0 |
| USER-012 | æ›´æ–°ç”¨æˆ·è§’è‰² | POST /api/v1/user/update | ä¿®æ”¹ç”¨æˆ·è§’è‰² | P0 |
| USER-013 | åˆ é™¤ç”¨æˆ· | DELETE /api/v1/user/delete | åˆ é™¤æŒ‡å®šç”¨æˆ· | P0 |
| USER-014 | åˆ é™¤ä¸å­˜åœ¨ç”¨æˆ· | DELETE /api/v1/user/delete | åˆ é™¤ä¸å­˜åœ¨çš„ç”¨æˆ· | P1 |
| USER-015 | é‡ç½®ç”¨æˆ·å¯†ç  | POST /api/v1/user/reset_password | ç®¡ç†å‘˜é‡ç½®å¯†ç  | P0 |

---

### 3.3 è§’è‰²ç®¡ç†æ¨¡å— (Roles)

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| ROLE-001 | è§’è‰²åˆ—è¡¨åˆ†é¡µ | GET /api/v1/role/list | æ­£å¸¸åˆ†é¡µæŸ¥è¯¢ | P0 |
| ROLE-002 | è§’è‰²æœç´¢ | GET /api/v1/role/list | æŒ‰è§’è‰²åç§°æœç´¢ | P0 |
| ROLE-003 | æŸ¥çœ‹è§’è‰²è¯¦æƒ… | GET /api/v1/role/get | æ ¹æ®IDæŸ¥è¯¢è§’è‰² | P0 |
| ROLE-004 | åˆ›å»ºè§’è‰²-æ­£å¸¸ | POST /api/v1/role/create | å®Œæ•´ä¿¡æ¯åˆ›å»ºè§’è‰² | P0 |
| ROLE-005 | åˆ›å»ºè§’è‰²-åç§°é‡å¤ | POST /api/v1/role/create | ä½¿ç”¨å·²å­˜åœ¨è§’è‰²å | P0 |
| ROLE-006 | åˆ›å»ºè§’è‰²-å¿…å¡«é¡¹ç¼ºå¤± | POST /api/v1/role/create | ç¼ºå°‘å¿…å¡«å­—æ®µ | P1 |
| ROLE-007 | æ›´æ–°è§’è‰²ä¿¡æ¯ | POST /api/v1/role/update | ä¿®æ”¹è§’è‰²ä¿¡æ¯ | P0 |
| ROLE-008 | åˆ é™¤è§’è‰² | DELETE /api/v1/role/delete | åˆ é™¤æŒ‡å®šè§’è‰² | P0 |
| ROLE-009 | æŸ¥çœ‹è§’è‰²æƒé™ | GET /api/v1/role/authorized | æŸ¥è¯¢è§’è‰²çš„èœå•å’ŒAPIæƒé™ | P0 |
| ROLE-010 | æ›´æ–°è§’è‰²æƒé™-èœå• | POST /api/v1/role/authorized | ä¿®æ”¹è§’è‰²èœå•æƒé™ | P0 |
| ROLE-011 | æ›´æ–°è§’è‰²æƒé™-API | POST /api/v1/role/authorized | ä¿®æ”¹è§’è‰²APIæƒé™ | P0 |

---

### 3.4 èœå•ç®¡ç†æ¨¡å— (Menus)

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| MENU-M-001 | èœå•æ ‘å½¢åˆ—è¡¨ | GET /api/v1/menu/list | è·å–æ ‘å½¢ç»“æ„èœå• | P0 |
| MENU-M-002 | æŸ¥çœ‹èœå•è¯¦æƒ… | GET /api/v1/menu/get | æ ¹æ®IDæŸ¥è¯¢èœå• | P0 |
| MENU-M-003 | åˆ›å»ºé¡¶çº§èœå• | POST /api/v1/menu/create | åˆ›å»ºparent_id=0çš„èœå• | P0 |
| MENU-M-004 | åˆ›å»ºå­èœå• | POST /api/v1/menu/create | åˆ›å»ºå­çº§èœå• | P0 |
| MENU-M-005 | åˆ›å»ºèœå•-å¿…å¡«é¡¹ç¼ºå¤± | POST /api/v1/menu/create | ç¼ºå°‘å¿…å¡«å­—æ®µ | P1 |
| MENU-M-006 | æ›´æ–°èœå•ä¿¡æ¯ | POST /api/v1/menu/update | ä¿®æ”¹èœå•ä¿¡æ¯ | P0 |
| MENU-M-007 | åˆ é™¤å¶å­èœå• | DELETE /api/v1/menu/delete | åˆ é™¤æ— å­èœå•çš„èœå• | P0 |
| MENU-M-008 | åˆ é™¤æœ‰å­èœå• | DELETE /api/v1/menu/delete | åˆ é™¤æœ‰å­èœå•çš„èœå•ï¼ˆåº”å¤±è´¥ï¼‰ | P0 |

---

### 3.5 APIç®¡ç†æ¨¡å— (APIs)

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| API-M-001 | APIåˆ—è¡¨åˆ†é¡µ | GET /api/v1/api/list | æ­£å¸¸åˆ†é¡µæŸ¥è¯¢ | P0 |
| API-M-002 | APIæœç´¢-è·¯å¾„ | GET /api/v1/api/list | æŒ‰è·¯å¾„æœç´¢ | P0 |
| API-M-003 | APIæœç´¢-ç®€ä»‹ | GET /api/v1/api/list | æŒ‰ç®€ä»‹æœç´¢ | P1 |
| API-M-004 | APIæœç´¢-æ ‡ç­¾ | GET /api/v1/api/list | æŒ‰æ ‡ç­¾ç­›é€‰ | P1 |
| API-M-005 | æŸ¥çœ‹APIè¯¦æƒ… | GET /api/v1/api/get | æ ¹æ®IDæŸ¥è¯¢API | P0 |
| API-M-006 | åˆ›å»ºAPI | POST /api/v1/api/create | åˆ›å»ºæ–°APIè®°å½• | P0 |
| API-M-007 | æ›´æ–°APIä¿¡æ¯ | POST /api/v1/api/update | ä¿®æ”¹APIä¿¡æ¯ | P0 |
| API-M-008 | åˆ é™¤API | DELETE /api/v1/api/delete | åˆ é™¤æŒ‡å®šAPI | P0 |
| API-M-009 | åˆ·æ–°APIåˆ—è¡¨ | POST /api/v1/api/refresh | ä»OpenAPIè‡ªåŠ¨åˆ·æ–° | P0 |

---

### 3.6 éƒ¨é—¨ç®¡ç†æ¨¡å— (Depts)

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| DEPT-001 | éƒ¨é—¨åˆ—è¡¨ | GET /api/v1/dept/list | è·å–éƒ¨é—¨åˆ—è¡¨ | P0 |
| DEPT-002 | æŸ¥çœ‹éƒ¨é—¨è¯¦æƒ… | GET /api/v1/dept/get | æ ¹æ®IDæŸ¥è¯¢éƒ¨é—¨ | P0 |
| DEPT-003 | åˆ›å»ºéƒ¨é—¨ | POST /api/v1/dept/create | åˆ›å»ºæ–°éƒ¨é—¨ | P0 |
| DEPT-004 | æ›´æ–°éƒ¨é—¨ä¿¡æ¯ | POST /api/v1/dept/update | ä¿®æ”¹éƒ¨é—¨ä¿¡æ¯ | P0 |
| DEPT-005 | åˆ é™¤éƒ¨é—¨ | DELETE /api/v1/dept/delete | åˆ é™¤æŒ‡å®šéƒ¨é—¨ | P0 |

---

### 3.7 å®¡è®¡æ—¥å¿—æ¨¡å— (AuditLog)

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| LOG-001 | æ—¥å¿—åˆ—è¡¨åˆ†é¡µ | GET /api/v1/auditlog/list | æ­£å¸¸åˆ†é¡µæŸ¥è¯¢ | P0 |
| LOG-002 | æ—¥å¿—ç­›é€‰-ç”¨æˆ· | GET /api/v1/auditlog/list | æŒ‰ç”¨æˆ·ç­›é€‰æ—¥å¿— | P1 |
| LOG-003 | æ—¥å¿—ç­›é€‰-æ“ä½œç±»å‹ | GET /api/v1/auditlog/list | æŒ‰æ“ä½œç±»å‹ç­›é€‰ | P1 |
| LOG-004 | æ—¥å¿—ç­›é€‰-æ—¶é—´èŒƒå›´ | GET /api/v1/auditlog/list | æŒ‰æ—¶é—´èŒƒå›´æŸ¥è¯¢ | P1 |

---

### 3.8 å¾®ä¿¡å…¬ä¼—å·æ¨¡å— (WeChat)

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| WX-001 | å¾®ä¿¡é…ç½®æŸ¥è¯¢ | GET /api/v1/wechat/* | æŸ¥è¯¢å¾®ä¿¡é…ç½® | P1 |
| WX-002 | å¾®ä¿¡é…ç½®æ›´æ–° | POST /api/v1/wechat/* | æ›´æ–°å¾®ä¿¡é…ç½® | P1 |
| WX-003 | èœå•ç®¡ç† | POST /api/v1/wechat/menu | ç®¡ç†å¾®ä¿¡èœå• | P1 |

---

### 3.9 å°ç¨‹åºæ¨¡å— (WxApp)

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| WXAPP-001 | å°ç¨‹åºæ•°æ®æŸ¥è¯¢ | GET /api/v1/wxapp/* | æŸ¥è¯¢å°ç¨‹åºæ•°æ®ï¼ˆåŒ¿åï¼‰ | P1 |
| WXAPP-002 | å°ç¨‹åºæ•°æ®å†™å…¥ | POST /api/v1/wxapp/* | å†™å…¥å°ç¨‹åºæ•°æ®ï¼ˆéœ€é‰´æƒï¼‰ | P1 |

---

### 3.10 çˆ¬è™«è„šæœ¬æ¨¡å— (Crawler)

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æ¥å£è·¯å¾„ | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|---------|--------|
| CRAWLER-001 | è„šæœ¬åˆ—è¡¨ | GET /api/v1/crawler/scripts | æŸ¥è¯¢è„šæœ¬åˆ—è¡¨ | P1 |
| CRAWLER-002 | åˆ›å»ºè„šæœ¬ | POST /api/v1/crawler/scripts | åˆ›å»ºæ–°è„šæœ¬ | P1 |
| CRAWLER-003 | æ‰§è¡Œè„šæœ¬ | POST /api/v1/crawler/run | è¿è¡Œè„šæœ¬ | P1 |
| CRAWLER-004 | è„šæœ¬æ—¥å¿— | GET /api/v1/crawler/logs | æŸ¥çœ‹æ‰§è¡Œæ—¥å¿— | P1 |

---

## å››ã€æƒé™ä¸å®‰å…¨æµ‹è¯•ç”¨ä¾‹

### 4.1 RBACæƒé™æµ‹è¯•

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|--------|
| PERM-001 | è¶…çº§ç®¡ç†å‘˜å…¨æƒé™ | è¶…çº§ç®¡ç†å‘˜è®¿é—®æ‰€æœ‰æ¥å£ | P0 |
| PERM-002 | æ™®é€šç”¨æˆ·å—é™è®¿é—® | æ™®é€šç”¨æˆ·åªèƒ½è®¿é—®æˆæƒæ¥å£ | P0 |
| PERM-003 | æ— æƒé™ç”¨æˆ·æ‹’ç» | æ— æƒé™ç”¨æˆ·è®¿é—®å—ä¿æŠ¤æ¥å£è¢«æ‹’ç» | P0 |
| PERM-004 | è§’è‰²æƒé™å˜æ›´ç”Ÿæ•ˆ | ä¿®æ”¹è§’è‰²æƒé™åç«‹å³ç”Ÿæ•ˆ | P0 |
| PERM-005 | ç”¨æˆ·è§’è‰²å˜æ›´ç”Ÿæ•ˆ | ä¿®æ”¹ç”¨æˆ·è§’è‰²åç«‹å³ç”Ÿæ•ˆ | P0 |
| PERM-006 | æ¥å£çº§æƒé™æ§åˆ¶ | éªŒè¯æ¯ä¸ªæ¥å£çš„æƒé™æ£€æŸ¥ | P0 |
| PERM-007 | æŒ‰é’®çº§æƒé™æ§åˆ¶ | å‰ç«¯æŒ‰é’®æ ¹æ®æƒé™æ˜¾ç¤º/éšè— | P1 |

### 4.2 JWTå®‰å…¨æµ‹è¯•

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|--------|
| JWT-001 | Tokenç­¾åéªŒè¯ | ä¼ªé€ Tokenè¢«æ‹’ç» | P0 |
| JWT-002 | Tokenè¿‡æœŸéªŒè¯ | è¿‡æœŸTokenè¢«æ‹’ç» | P0 |
| JWT-003 | Tokenåˆ·æ–°æœºåˆ¶ | Tokenåˆ·æ–°æµç¨‹æ­£å¸¸ | P1 |
| JWT-004 | Tokenç¯¡æ”¹æ£€æµ‹ | ä¿®æ”¹Tokenå†…å®¹è¢«æ£€æµ‹ | P0 |

### 4.3 æ•°æ®å®‰å…¨æµ‹è¯•

| ç”¨ä¾‹ID | ç”¨ä¾‹åç§° | æµ‹è¯•åœºæ™¯ | ä¼˜å…ˆçº§ |
|--------|---------|---------|--------|
| SEC-001 | SQLæ³¨å…¥é˜²æŠ¤ | å„æ¥å£é˜²SQLæ³¨å…¥ | P0 |
| SEC-002 | XSSé˜²æŠ¤ | è¾“å…¥å†…å®¹XSSè¿‡æ»¤ | P0 |
| SEC-003 | CSRFé˜²æŠ¤ | CSRFæ”»å‡»é˜²æŠ¤ | P1 |
| SEC-004 | å¯†ç åŠ å¯†å­˜å‚¨ | æ•°æ®åº“å¯†ç å·²åŠ å¯† | P0 |
| SEC-005 | æ•æ„Ÿæ•°æ®è„±æ• | æ—¥å¿—ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯ | P1 |

---

## äº”ã€AIæ™ºèƒ½åŒ–æµ‹è¯•æ–¹æ¡ˆ

### 5.1 AIæµ‹è¯•æ¡†æ¶æ¶æ„

```python
# AI æµ‹è¯•ç³»ç»Ÿæ¶æ„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            AI Testing Platform                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. API Analyzer (APIåˆ†æå™¨)                     â”‚
â”‚     - ä» OpenAPI è§„èŒƒæå–æ¥å£ä¿¡æ¯                â”‚
â”‚     - åˆ†ææ¥å£å‚æ•°ã€è¿”å›å€¼ã€ä¾èµ–å…³ç³»              â”‚
â”‚     - è¯†åˆ«æ¥å£å˜æ›´                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2. Test Generator (æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨)              â”‚
â”‚     - åŸºäºæ¥å£è§„èŒƒè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹                â”‚
â”‚     - ä½¿ç”¨ LLM ç”Ÿæˆè¾¹ç•Œå€¼å’Œå¼‚å¸¸åœºæ™¯              â”‚
â”‚     - ç”Ÿæˆæ­£å‘å’Œè´Ÿå‘æµ‹è¯•ç”¨ä¾‹                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3. Test Executor (æµ‹è¯•æ‰§è¡Œå™¨)                   â”‚
â”‚     - è‡ªåŠ¨æ‰§è¡Œç”Ÿæˆçš„æµ‹è¯•ç”¨ä¾‹                     â”‚
â”‚     - æ”¯æŒå¹¶å‘æ‰§è¡Œ                              â”‚
â”‚     - æ™ºèƒ½é‡è¯•å’Œé”™è¯¯æ¢å¤                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  4. Result Analyzer (ç»“æœåˆ†æå™¨)                 â”‚
â”‚     - åˆ†ææµ‹è¯•ç»“æœ                               â”‚
â”‚     - ä½¿ç”¨ AI è¯†åˆ«å¤±è´¥åŸå›                        â”‚
â”‚     - ç”Ÿæˆå¯è¯»æ€§å¼ºçš„æµ‹è¯•æŠ¥å‘Š                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  5. Continuous Learning (æŒç»­å­¦ä¹ )               â”‚
â”‚     - ä»å¤±è´¥æ¡ˆä¾‹å­¦ä¹                              â”‚
â”‚     - ä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆç­–ç•¥                       â”‚
â”‚     - é¢„æµ‹æ½œåœ¨ç¼ºé™·                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 AIæµ‹è¯•æ ¸å¿ƒåŠŸèƒ½

#### 5.2.1 è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆ

**åŠŸèƒ½æè¿°**ï¼š
- ä» FastAPI çš„ `/openapi.json` è‡ªåŠ¨è§£ææ‰€æœ‰æ¥å£
- ä½¿ç”¨ LLM ä¸ºæ¯ä¸ªæ¥å£ç”Ÿæˆå¤šç§æµ‹è¯•åœºæ™¯
- è‡ªåŠ¨è¯†åˆ«æ¥å£ä¹‹é—´çš„ä¾èµ–å…³ç³»

**å®ç°æ–¹æ¡ˆ**ï¼š
```python
# ä¼ªä»£ç ç¤ºä¾‹
class AITestGenerator:
    def __init__(self, openapi_url, llm_model):
        self.openapi_url = openapi_url
        self.llm = llm_model
    
    async def generate_tests_from_openapi(self):
        # 1. è·å– OpenAPI è§„èŒƒ
        openapi_spec = await self.fetch_openapi_spec()
        
        # 2. è§£ææ‰€æœ‰æ¥å£
        endpoints = self.parse_endpoints(openapi_spec)
        
        # 3. ä¸ºæ¯ä¸ªæ¥å£ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
        for endpoint in endpoints:
            test_cases = await self.generate_test_cases(endpoint)
            await self.save_test_cases(test_cases)
    
    async def generate_test_cases(self, endpoint):
        # ä½¿ç”¨ LLM ç”Ÿæˆæµ‹è¯•åœºæ™¯
        prompt = f"""
        ä¸ºä»¥ä¸‹APIæ¥å£ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼š
        - è·¯å¾„: {endpoint.path}
        - æ–¹æ³•: {endpoint.method}
        - å‚æ•°: {endpoint.parameters}
        - è¿”å›å€¼: {endpoint.responses}
        
        è¯·ç”Ÿæˆï¼š
        1. æ­£å¸¸åœºæ™¯æµ‹è¯•ç”¨ä¾‹
        2. è¾¹ç•Œå€¼æµ‹è¯•ç”¨ä¾‹
        3. å¼‚å¸¸åœºæ™¯æµ‹è¯•ç”¨ä¾‹
        4. å®‰å…¨æµ‹è¯•ç”¨ä¾‹
        """
        
        test_cases = await self.llm.generate(prompt)
        return test_cases
```

#### 5.2.2 æ™ºèƒ½æµ‹è¯•æ•°æ®ç”Ÿæˆ

**åŠŸèƒ½æè¿°**ï¼š
- è‡ªåŠ¨ç”Ÿæˆç¬¦åˆä¸šåŠ¡é€»è¾‘çš„æµ‹è¯•æ•°æ®
- è¯†åˆ«å­—æ®µç±»å‹å’Œçº¦æŸï¼Œç”Ÿæˆæœ‰æ•ˆ/æ— æ•ˆæ•°æ®
- æ”¯æŒå…³è”æ•°æ®çš„è‡ªåŠ¨åˆ›å»º

**æ•°æ®ç”Ÿæˆç­–ç•¥**ï¼š
- **ç”¨æˆ·å**: ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ç”¨æˆ·åï¼ˆ3-20å­—ç¬¦ï¼Œå­—æ¯æ•°å­—ï¼‰
- **é‚®ç®±**: ç”Ÿæˆæœ‰æ•ˆ/æ— æ•ˆé‚®ç®±æ ¼å¼
- **å¯†ç **: ç”Ÿæˆå¼ºå¯†ç /å¼±å¯†ç 
- **ID**: ç”Ÿæˆå­˜åœ¨/ä¸å­˜åœ¨çš„ID
- **æ—¥æœŸ**: ç”Ÿæˆè¿‡å»/æœªæ¥/è¾¹ç•Œæ—¥æœŸ

#### 5.2.3 æ¥å£ä¾èµ–å…³ç³»è‡ªåŠ¨å¤„ç†

**åŠŸèƒ½æè¿°**ï¼š
- è‡ªåŠ¨è¯†åˆ«æ¥å£è°ƒç”¨é¡ºåºï¼ˆå¦‚ï¼šå…ˆç™»å½•åè®¿é—®ï¼‰
- è‡ªåŠ¨ç»´æŠ¤æµ‹è¯•æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸ
- æ™ºèƒ½ç®¡ç† Token å’Œä¼šè¯çŠ¶æ€

**ä¾èµ–é“¾ç¤ºä¾‹**ï¼š
```
ç™»å½• -> è·å–Token -> åˆ›å»ºè§’è‰² -> åˆ›å»ºç”¨æˆ· -> åˆ†é…è§’è‰² -> æµ‹è¯•æƒé™
```

#### 5.2.4 æµ‹è¯•ç»“æœæ™ºèƒ½åˆ†æ

**åŠŸèƒ½æè¿°**ï¼š
- ä½¿ç”¨ LLM åˆ†æå¤±è´¥åŸå› 
- æä¾›ä¿®å¤å»ºè®®
- ç”Ÿæˆæ˜“è¯»çš„æµ‹è¯•æŠ¥å‘Š

**åˆ†æç»´åº¦**ï¼š
- å¤±è´¥ç±»å‹åˆ†ç±»ï¼ˆå‚æ•°é”™è¯¯ã€æƒé™é—®é¢˜ã€é€»è¾‘é”™è¯¯ç­‰ï¼‰
- å¤±è´¥è¶‹åŠ¿åˆ†æ
- æ¥å£ç¨³å®šæ€§è¯„åˆ†
- æ½œåœ¨é£é™©é¢„æµ‹

### 5.3 AIæµ‹è¯•æµç¨‹

```mermaid
graph TB
    A[ç›‘å¬APIå˜æ›´] --> B{æ£€æµ‹åˆ°æ–°æ¥å£?}
    B -->|æ˜¯| C[AIåˆ†ææ¥å£]
    B -->|å¦| D[æ‰§è¡Œç°æœ‰æµ‹è¯•]
    C --> E[ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹]
    E --> F[ç”Ÿæˆæµ‹è¯•æ•°æ®]
    F --> G[æ‰§è¡Œæµ‹è¯•]
    D --> G
    G --> H[æ”¶é›†ç»“æœ]
    H --> I[AIåˆ†æç»“æœ]
    I --> J{æœ‰å¤±è´¥?}
    J -->|æ˜¯| K[AIåˆ†æå¤±è´¥åŸå› ]
    J -->|å¦| L[ç”ŸæˆæˆåŠŸæŠ¥å‘Š]
    K --> M[æä¾›ä¿®å¤å»ºè®®]
    M --> N[æ›´æ–°æµ‹è¯•ç”¨ä¾‹åº“]
    L --> N
    N --> O[å‘é€é€šçŸ¥]
```

### 5.4 AIæµ‹è¯•æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯é€‰å‹ | è¯´æ˜ |
|------|---------|------|
| LLMæ¨¡å‹ | OpenAI GPT-4 / Claude / æœ¬åœ°LLM | æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå’Œç»“æœåˆ†æ |
| æµ‹è¯•æ¡†æ¶ | pytest + httpx | å¼‚æ­¥æ¥å£æµ‹è¯• |
| APIè§£æ | pydantic + FastAPI | è§£æOpenAPIè§„èŒƒ |
| æ•°æ®ç”Ÿæˆ | Faker + AIç”Ÿæˆ | æ™ºèƒ½æµ‹è¯•æ•°æ® |
| æŠ¥å‘Šç”Ÿæˆ | Allure / pytest-html | å¯è§†åŒ–æµ‹è¯•æŠ¥å‘Š |
| CI/CDé›†æˆ | GitHub Actions | è‡ªåŠ¨åŒ–æ‰§è¡Œ |

### 5.5 AIæµ‹è¯•é…ç½®æ–‡ä»¶

```yaml
# ai_testing_config.yaml

ai_testing:
  enabled: true
  
  # LLM é…ç½®
  llm:
    provider: "openai"  # openai / claude / local
    model: "gpt-4"
    api_key: "${OPENAI_API_KEY}"
    temperature: 0.7
  
  # æµ‹è¯•ç”Ÿæˆé…ç½®
  generation:
    auto_generate: true
    watch_openapi: true
    openapi_url: "http://localhost:9999/openapi.json"
    update_interval: 300  # ç§’
    
  # æµ‹è¯•æ‰§è¡Œé…ç½®
  execution:
    parallel: true
    max_workers: 4
    retry_failed: true
    max_retries: 3
    
  # è¦†ç›–ç‡ç›®æ ‡
  coverage:
    target: 80
    critical_apis: 95
    
  # æŠ¥å‘Šé…ç½®
  reporting:
    format: ["html", "json", "markdown"]
    output_dir: "test_reports"
    send_notification: true
    notification_channels:
      - type: "email"
        recipients: ["dev@example.com"]
      - type: "slack"
        webhook_url: "${SLACK_WEBHOOK}"
```

---

## å…­ã€æµ‹è¯•æ•°æ®ç®¡ç†

### 6.1 æµ‹è¯•æ•°æ®ç­–ç•¥

| æ•°æ®ç±»å‹ | ç­–ç•¥ | è¯´æ˜ |
|---------|------|------|
| åŸºç¡€æ•°æ® | é¢„ç½®å›ºå®šæ•°æ® | ç³»ç»Ÿè§’è‰²ã€èœå•ç­‰ |
| åŠ¨æ€æ•°æ® | æµ‹è¯•æ—¶åˆ›å»ºæ¸…ç† | æµ‹è¯•ç”¨æˆ·ã€ä¸´æ—¶è§’è‰²ç­‰ |
| å…³è”æ•°æ® | è‡ªåŠ¨ç»´æŠ¤ä¾èµ– | ç”¨æˆ·-è§’è‰²å…³ç³»ç­‰ |

### 6.2 æµ‹è¯•æ•°æ®éš”ç¦»

- æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®
- æµ‹è¯•å‰åˆ›å»ºï¼Œæµ‹è¯•åæ¸…ç†
- ä½¿ç”¨äº‹åŠ¡å›æ»šæœºåˆ¶
- æ”¯æŒå¹¶è¡Œæµ‹è¯•ä¸å†²çª

### 6.3 æµ‹è¯•æ•°æ®ç¤ºä¾‹

```json
// fixtures/test_users.json
{
  "admin_user": {
    "username": "test_admin",
    "email": "test_admin@example.com",
    "password": "Test@123456",
    "is_superuser": true
  },
  "normal_user": {
    "username": "test_user",
    "email": "test_user@example.com",
    "password": "Test@123456",
    "is_superuser": false,
    "roles": ["viewer"]
  }
}
```

---

## ä¸ƒã€æµ‹è¯•æ‰§è¡Œè®¡åˆ’

### 7.1 æµ‹è¯•ç¯å¢ƒ

| ç¯å¢ƒ | ç”¨é€” | æ›´æ–°é¢‘ç‡ |
|------|------|---------|
| æœ¬åœ°å¼€å‘ç¯å¢ƒ | å¼€å‘æ—¶å•å…ƒæµ‹è¯• | å®æ—¶ |
| CIç¯å¢ƒ | è‡ªåŠ¨åŒ–é›†æˆæµ‹è¯• | æ¯æ¬¡æäº¤ |
| æµ‹è¯•ç¯å¢ƒ | E2Eå’Œæ‰‹åŠ¨æµ‹è¯• | æ¯æ—¥ |
| é¢„å‘å¸ƒç¯å¢ƒ | å‘å¸ƒå‰éªŒè¯ | å‘å¸ƒå‰ |

### 7.2 æµ‹è¯•æ‰§è¡Œæ—¶æœº

- **Pre-commit**: è¿è¡Œå•å…ƒæµ‹è¯•ï¼ˆå¿«é€Ÿï¼‰
- **PRåˆå¹¶å‰**: è¿è¡Œé›†æˆæµ‹è¯•
- **æ¯æ—¥æ„å»º**: è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶ + AIç”Ÿæˆæ–°ç”¨ä¾‹
- **å‘å¸ƒå‰**: è¿è¡Œå®Œæ•´æµ‹è¯• + æ‰‹åŠ¨éªŒè¯

### 7.3 CI/CDé›†æˆ

```yaml
# .github/workflows/test.yml
name: Automated Testing

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]
  schedule:
    - cron: '0 2 * * *'  # æ¯å¤©å‡Œæ™¨2ç‚¹

jobs:
  unit-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run Unit Tests
        run: pytest tests/unit -v
  
  integration-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run Integration Tests
        run: pytest tests/integration -v
  
  ai-test-generation:
    runs-on: ubuntu-latest
    if: github.event_name == 'schedule'
    steps:
      - uses: actions/checkout@v3
      - name: Generate AI Tests
        run: python tests/ai_testing/test_generator.py
      - name: Run Generated Tests
        run: pytest tests/ai_testing/generated -v
  
  e2e-test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run E2E Tests
        run: pytest tests/e2e -v
```

---

## å…«ã€æµ‹è¯•æŠ¥å‘Šä¸åº¦é‡

### 8.1 å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|--------|------|
| ä»£ç è¦†ç›–ç‡ | â‰¥80% | è¡Œè¦†ç›–ç‡ |
| APIè¦†ç›–ç‡ | 100% | æ‰€æœ‰æ¥å£éƒ½æœ‰æµ‹è¯• |
| æµ‹è¯•é€šè¿‡ç‡ | â‰¥95% | ç¨³å®šæ€§æŒ‡æ ‡ |
| å¹³å‡æ‰§è¡Œæ—¶é—´ | â‰¤10åˆ†é’Ÿ | å®Œæ•´æµ‹è¯•å¥—ä»¶ |
| ç¼ºé™·æ£€å‡ºç‡ | â‰¥90% | ææµ‹å‰å‘ç°çš„ç¼ºé™·æ¯”ä¾‹ |

### 8.2 æµ‹è¯•æŠ¥å‘Šå†…å®¹

1. **æµ‹è¯•æ¦‚è§ˆ**
   - æ€»ç”¨ä¾‹æ•°ã€é€šè¿‡æ•°ã€å¤±è´¥æ•°ã€è·³è¿‡æ•°
   - è¦†ç›–ç‡ç»Ÿè®¡
   - æ‰§è¡Œæ—¶é—´

2. **å¤±è´¥è¯¦æƒ…**
   - å¤±è´¥ç”¨ä¾‹åˆ—è¡¨
   - é”™è¯¯å †æ ˆ
   - AIåˆ†æçš„å¤±è´¥åŸå› 
   - ä¿®å¤å»ºè®®

3. **è¶‹åŠ¿åˆ†æ**
   - å†å²é€šè¿‡ç‡è¶‹åŠ¿
   - æ¥å£ç¨³å®šæ€§è¶‹åŠ¿
   - æ–°å¢/ä¿®æ”¹æ¥å£ç»Ÿè®¡

4. **AIæ´å¯Ÿ**
   - æ½œåœ¨é£é™©é¢„æµ‹
   - æµ‹è¯•ç›²åŒºè¯†åˆ«
   - ä¼˜åŒ–å»ºè®®

### 8.3 æŠ¥å‘Šåˆ†å‘

- **HTMLæŠ¥å‘Š**: å­˜å‚¨åˆ°æµ‹è¯•æœåŠ¡å™¨
- **é‚®ä»¶é€šçŸ¥**: å‘é€ç»™å¼€å‘å›¢é˜Ÿ
- **Slacké€šçŸ¥**: å®æ—¶æ¨é€å¤±è´¥å‘Šè­¦
- **Dashboard**: å¯è§†åŒ–çœ‹æ¿å®æ—¶å±•ç¤º

---

## ä¹ã€æµ‹è¯•å·¥å…·ä¸è„šæœ¬

### 9.1 æ ¸å¿ƒæµ‹è¯•è„šæœ¬

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v

# è¿è¡Œå•å…ƒæµ‹è¯•
pytest tests/unit/ -v

# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/ -v

# è¿è¡ŒE2Eæµ‹è¯•
pytest tests/e2e/ -v

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest tests/ --cov=app --cov-report=html

# AIè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
python tests/ai_testing/test_generator.py

# æ‰§è¡ŒAIç”Ÿæˆçš„æµ‹è¯•
pytest tests/ai_testing/generated/ -v

# è¿è¡ŒæŒ‡å®šä¼˜å…ˆçº§æµ‹è¯•ï¼ˆP0ï¼‰
pytest tests/ -m "priority_p0"

# å¹¶è¡Œæ‰§è¡Œæµ‹è¯•
pytest tests/ -n 4
```

### 9.2 æµ‹è¯•è¾…åŠ©å·¥å…·

| å·¥å…· | ç”¨é€” | å‘½ä»¤ |
|------|------|------|
| pytest | æµ‹è¯•æ¡†æ¶ | `pytest` |
| pytest-cov | è¦†ç›–ç‡ | `pytest --cov` |
| pytest-xdist | å¹¶è¡Œæ‰§è¡Œ | `pytest -n 4` |
| pytest-asyncio | å¼‚æ­¥æµ‹è¯• | è‡ªåŠ¨æ”¯æŒ |
| allure | æµ‹è¯•æŠ¥å‘Š | `allure serve` |
| httpx | HTTPå®¢æˆ·ç«¯ | ä»£ç ä¸­ä½¿ç”¨ |
| faker | æ•°æ®ç”Ÿæˆ | ä»£ç ä¸­ä½¿ç”¨ |

---

## åã€æµ‹è¯•ç»´æŠ¤ç­–ç•¥

### 10.1 æµ‹è¯•ç”¨ä¾‹ç»´æŠ¤

- **å®šæœŸreview**: æ¯æœˆæ£€æŸ¥æµ‹è¯•ç”¨ä¾‹æœ‰æ•ˆæ€§
- **åŠæ—¶æ›´æ–°**: æ¥å£å˜æ›´å24å°æ—¶å†…æ›´æ–°æµ‹è¯•
- **è‡ªåŠ¨æ£€æµ‹**: AIç›‘æµ‹æ¥å£å˜æ›´å¹¶ç”Ÿæˆæ–°ç”¨ä¾‹
- **ç‰ˆæœ¬ç®¡ç†**: æµ‹è¯•ç”¨ä¾‹ä»£ç åŒ–å¹¶ç‰ˆæœ¬æ§åˆ¶

### 10.2 AIæ¨¡å‹æŒç»­ä¼˜åŒ–

- æ”¶é›†å¤±è´¥æ¡ˆä¾‹ç”¨äºæ¨¡å‹å¾®è°ƒ
- å®šæœŸè¯„ä¼°ç”Ÿæˆç”¨ä¾‹çš„è´¨é‡
- æ ¹æ®é¡¹ç›®ç‰¹ç‚¹è°ƒæ•´ç”Ÿæˆç­–ç•¥
- å¼•å…¥äººå·¥åé¦ˆæœºåˆ¶

### 10.3 æµ‹è¯•å€ºåŠ¡ç®¡ç†

- æ ‡è®°TODOçš„æµ‹è¯•ç”¨ä¾‹
- è·Ÿè¸ªæœªè¦†ç›–çš„è¾¹ç•Œåœºæ™¯
- å®šæœŸæ¸…ç†æ— æ•ˆæµ‹è¯•
- é‡æ„å†—ä½™æµ‹è¯•

---

## åä¸€ã€å®æ–½è·¯çº¿å›¾

### Phase 1: åŸºç¡€æµ‹è¯•æ¡†æ¶ (Week 1-2)
- [ ] æ­å»ºpytestæµ‹è¯•æ¡†æ¶
- [ ] é…ç½®æµ‹è¯•ç¯å¢ƒå’Œæ•°æ®åº“
- [ ] å®ç°åŸºç¡€fixtureå’Œconftest
- [ ] ç¼–å†™è®¤è¯æ¨¡å—æµ‹è¯•ç”¨ä¾‹ï¼ˆAUTH/USER-INFOï¼‰
- [ ] é…ç½®CI/CDåŸºç¡€æµç¨‹

### Phase 2: æ ¸å¿ƒåŠŸèƒ½æµ‹è¯• (Week 3-4)
- [ ] å®Œæˆç”¨æˆ·ç®¡ç†æ¨¡å—æµ‹è¯•ï¼ˆUSER-001 ~ USER-015ï¼‰
- [ ] å®Œæˆè§’è‰²ç®¡ç†æ¨¡å—æµ‹è¯•ï¼ˆROLE-001 ~ ROLE-011ï¼‰
- [ ] å®Œæˆèœå•ç®¡ç†æ¨¡å—æµ‹è¯•ï¼ˆMENU-M-001 ~ MENU-M-008ï¼‰
- [ ] å®ŒæˆAPIç®¡ç†æ¨¡å—æµ‹è¯•ï¼ˆAPI-M-001 ~ API-M-009ï¼‰
- [ ] è¾¾åˆ°50%è¦†ç›–ç‡

### Phase 3: æ‰©å±•åŠŸèƒ½æµ‹è¯• (Week 5-6)
- [ ] å®Œæˆéƒ¨é—¨ç®¡ç†æ¨¡å—æµ‹è¯•
- [ ] å®Œæˆå®¡è®¡æ—¥å¿—æ¨¡å—æµ‹è¯•
- [ ] å®Œæˆæƒé™ä¸å®‰å…¨æµ‹è¯•
- [ ] è¾¾åˆ°80%è¦†ç›–ç‡
- [ ] ç”Ÿæˆåˆç‰ˆæµ‹è¯•æŠ¥å‘Š

### Phase 4: AIæµ‹è¯•æ¡†æ¶å¼€å‘ (Week 7-8)
- [ ] å¼€å‘APIåˆ†æå™¨ï¼ˆä»OpenAPIæå–æ¥å£ï¼‰
- [ ] å¼€å‘AIæµ‹è¯•ç”Ÿæˆå™¨ï¼ˆä½¿ç”¨LLMç”Ÿæˆç”¨ä¾‹ï¼‰
- [ ] å¼€å‘æµ‹è¯•æ‰§è¡Œå™¨ï¼ˆè‡ªåŠ¨æ‰§è¡Œç”Ÿæˆçš„æµ‹è¯•ï¼‰
- [ ] å¼€å‘ç»“æœåˆ†æå™¨ï¼ˆAIåˆ†æå¤±è´¥åŸå› ï¼‰
- [ ] é›†æˆåˆ°CI/CDæµç¨‹

### Phase 5: AIæ™ºèƒ½åŒ–å¢å¼º (Week 9-10)
- [ ] å®ç°æ¥å£å˜æ›´è‡ªåŠ¨æ£€æµ‹
- [ ] å®ç°æµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨æ›´æ–°
- [ ] å®ç°æ™ºèƒ½æµ‹è¯•æ•°æ®ç”Ÿæˆ
- [ ] å®ç°ä¾èµ–å…³ç³»è‡ªåŠ¨å¤„ç†
- [ ] å®ç°æµ‹è¯•æŠ¥å‘ŠAIåˆ†æ

### Phase 6: E2Eå’Œæ€§èƒ½æµ‹è¯• (Week 11-12)
- [ ] ä½¿ç”¨Playwrightå¼€å‘E2Eæµ‹è¯•
- [ ] å…³é”®ä¸šåŠ¡æµç¨‹ç«¯åˆ°ç«¯éªŒè¯
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] å‹åŠ›æµ‹è¯•
- [ ] æœ€ç»ˆæŠ¥å‘Šå’Œä¼˜åŒ–

### Phase 7: æŒç»­ä¼˜åŒ– (Ongoing)
- [ ] æ ¹æ®åé¦ˆä¼˜åŒ–AIç”Ÿæˆç­–ç•¥
- [ ] æ‰©å±•æµ‹è¯•è¦†ç›–èŒƒå›´
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ–‡æ¡£å®Œå–„

---

## åäºŒã€æˆåŠŸæ ‡å‡†

### 12.1 é‡åŒ–æŒ‡æ ‡
- âœ… ä»£ç è¦†ç›–ç‡è¾¾åˆ°80%ä»¥ä¸Š
- âœ… æ‰€æœ‰APIæ¥å£100%æœ‰æµ‹è¯•ç”¨ä¾‹
- âœ… P0ä¼˜å…ˆçº§ç”¨ä¾‹é€šè¿‡ç‡100%
- âœ… CI/CDé›†æˆå®Œæˆï¼Œæ¯æ¬¡æäº¤è‡ªåŠ¨æµ‹è¯•
- âœ… AIè‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹å‡†ç¡®ç‡â‰¥85%
- âœ… æµ‹è¯•æ‰§è¡Œæ—¶é—´â‰¤10åˆ†é’Ÿï¼ˆå®Œæ•´å¥—ä»¶ï¼‰

### 12.2 è´¨é‡æŒ‡æ ‡
- âœ… ææµ‹å‰ç¼ºé™·æ£€å‡ºç‡â‰¥90%
- âœ… ç”Ÿäº§ç¯å¢ƒç¼ºé™·é€ƒé€¸ç‡â‰¤5%
- âœ… æµ‹è¯•ç”¨ä¾‹å¯ç»´æŠ¤æ€§è‰¯å¥½
- âœ… æµ‹è¯•æŠ¥å‘Šæ¸…æ™°æ˜“æ‡‚

### 12.3 è‡ªåŠ¨åŒ–æŒ‡æ ‡
- âœ… æ–°å¢æ¥å£è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
- âœ… æ¥å£å˜æ›´è‡ªåŠ¨æ›´æ–°æµ‹è¯•
- âœ… å¤±è´¥è‡ªåŠ¨åˆ†æå¹¶æä¾›å»ºè®®
- âœ… æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆå’Œåˆ†å‘

---

## åä¸‰ã€é£é™©ä¸æŒ‘æˆ˜

| é£é™© | å½±å“ | åº”å¯¹æªæ–½ |
|------|------|---------|
| AIç”Ÿæˆç”¨ä¾‹è´¨é‡ä¸ç¨³å®š | é«˜ | å»ºç«‹äººå·¥reviewæœºåˆ¶ï¼ŒæŒç»­ä¼˜åŒ–prompt |
| æµ‹è¯•æ•°æ®æ±¡æŸ“ | ä¸­ | ä¸¥æ ¼çš„æ•°æ®éš”ç¦»å’Œæ¸…ç†æœºåˆ¶ |
| æµ‹è¯•æ‰§è¡Œæ—¶é—´è¿‡é•¿ | ä¸­ | å¹¶è¡Œæ‰§è¡Œã€ä¼˜å…ˆçº§åˆ†å±‚ã€å¢é‡æµ‹è¯• |
| æ¥å£é¢‘ç¹å˜æ›´ | ä¸­ | AIè‡ªåŠ¨æ£€æµ‹å’Œæ›´æ–°æœºåˆ¶ |
| æµ‹è¯•ç»´æŠ¤æˆæœ¬é«˜ | ä½ | AIè‡ªåŠ¨åŒ–å‡å°‘äººå·¥ç»´æŠ¤å·¥ä½œé‡ |

---

## åå››ã€é™„å½•

### 14.1 å‚è€ƒæ–‡æ¡£
- FastAPIå®˜æ–¹æ–‡æ¡£: https://fastapi.tiangolo.com/
- pytestæ–‡æ¡£: https://docs.pytest.org/
- Playwrightæ–‡æ¡£: https://playwright.dev/
- LangChainæ–‡æ¡£: https://python.langchain.com/

### 14.2 ç›¸å…³é“¾æ¥
- OpenAPIè§„èŒƒ: http://localhost:9999/openapi.json
- APIæ–‡æ¡£: http://localhost:9999/docs
- æµ‹è¯•æŠ¥å‘Š: ./test_reports/index.html

### 14.3 æ›´æ–°æ—¥å¿—
| æ—¥æœŸ | ç‰ˆæœ¬ | æ›´æ–°å†…å®¹ |
|------|------|---------|
| 2025-11-11 | v1.0 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´æµ‹è¯•æ–¹æ¡ˆ |

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ  
**å®¡æ ¸çŠ¶æ€**: â³ å¾…å®¡æ ¸  
**æ‰§è¡ŒçŠ¶æ€**: ğŸ“ å¾…æ‰§è¡Œ
